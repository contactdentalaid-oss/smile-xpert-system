<!DOCTYPE html>
<html lang="en">
<head>

    <!-- Inside <head> section -->
<link rel="stylesheet" href="style.css">



    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smile Xpert - Admin Control Panel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-blue: #0ea5e9;
            --primary-teal: #0d9488;
            --light-blue: #e0f2fe;
            --medical-white: #f8fafc;
            --dark-text: #1e293b;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--medical-white);
            color: var(--dark-text);
        }
        
        .medical-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
        }
        
        .bengali-text {
            font-family: 'Poppins', sans-serif;
        }
        
        .btn-primary {
            background: linear-gradient(to right, var(--primary-blue), var(--primary-teal));
            color: white;
            font-weight: 600;
            padding: 10px 20px;
            border-radius: 8px;
            transition: all 0.3s;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(14, 165, 233, 0.2);
        }
        
        .btn-secondary {
            background-color: #f1f5f9;
            color: var(--dark-text);
            font-weight: 600;
            padding: 10px 20px;
            border-radius: 8px;
            transition: all 0.3s;
        }
        
        .btn-secondary:hover {
            background-color: #e2e8f0;
        }
        
        .input-field {
            border: 1px solid #cbd5e1;
            border-radius: 8px;
            padding: 10px 14px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .input-field:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
        }
        
        .tab-button {
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .tab-button.active {
            background-color: var(--primary-blue);
            color: white;
        }
        
        .tab-button:not(.active) {
            background-color: #f1f5f9;
            color: #64748b;
        }
        
        .tab-button:not(.active):hover {
            background-color: #e2e8f0;
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Page 2: Admin Control Panel -->
    <div class="container mx-auto p-6">
        <!-- Header -->
        <header class="flex justify-between items-center mb-8">
            <div class="flex items-center">
                <div class="w-12 h-12 rounded-full bg-gradient-to-r from-blue-400 to-teal-400 flex items-center justify-center mr-4">
                    <i class="fas fa-tooth text-white text-2xl"></i>
                </div>
                <div>
                    <h1 class="text-3xl font-bold text-gray-800">Smile Xpert Admin Panel</h1>
                    <p class="text-gray-600">Patient Management System Control Center</p>
                </div>
            </div>
            
            <div class="flex items-center space-x-4">
                <button onclick="window.open('index.html', '_blank')" class="btn-secondary flex items-center">
                    <i class="fas fa-tv mr-2"></i> TV View
                </button>
                <div class="text-right">
                    <div id="admin-clock" class="text-lg font-semibold text-blue-600"></div>
                    <div class="text-sm text-gray-600">Admin Control Panel</div>
                </div>
            </div>
        </header>
        
        <!-- Main Content Tabs -->
        <div class="flex space-x-4 mb-8">
            <div class="tab-button active" data-tab="treatment-tab">
                <i class="fas fa-procedures mr-2"></i> Active Treatments
            </div>
            <div class="tab-button" data-tab="waiting-tab">
                <i class="fas fa-clock mr-2"></i> Waiting List
            </div>
            <div class="tab-button" data-tab="marquee-tab">
                <i class="fas fa-bullhorn mr-2"></i> Notice Board
            </div>
            <div class="tab-button" data-tab="slider-tab">
                <i class="fas fa-images mr-2"></i> Image Slider
            </div>
        </div>
        
        <!-- Tab Contents -->
        <div class="medical-card p-6 mb-8">
            <!-- Active Treatments Tab -->
            <div id="treatment-tab" class="tab-content">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">সক্রিয় চিকিত্সা পরিচালনা</h2>
                    <button id="add-treatment-btn" class="btn-primary flex items-center">
                        <i class="fas fa-plus mr-2"></i> নতুন চিকিত্সা যোগ করুন
                    </button>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8" id="treatment-form-container" style="display: none;">
                    <div class="md:col-span-3 bg-blue-50 p-6 rounded-lg mb-4">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">নতুন চিকিত্সার তথ্য যোগ করুন</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">সার্জনের নাম</label>
                                <input type="text" id="surgeon-input" class="input-field w-full" placeholder="ডা. আহমেদ করিম">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">OT/ইউনিট নম্বর</label>
                                <input type="text" id="unit-input" class="input-field w-full" placeholder="OT-1">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">রোগীর নাম</label>
                                <input type="text" id="patient-input" class="input-field w-full" placeholder="মো. রহিম">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">স্ট্যাটাস</label>
                                <select id="status-input" class="input-field w-full">
                                    <option value="In-Progress">চলমান</option>
                                    <option value="Next">পরবর্তী</option>
                                </select>
                            </div>
                        </div>
                        <div class="flex justify-end space-x-4 mt-6">
                            <button id="cancel-treatment-btn" class="btn-secondary">বাতিল করুন</button>
                            <button id="save-treatment-btn" class="btn-primary">সংরক্ষণ করুন</button>
                        </div>
                    </div>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead>
                            <tr class="bg-blue-50">
                                <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider">সার্জনের নাম</th>
                                <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider">OT/ইউনিট নম্বর</th>
                                <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider">রোগীর নাম</th>
                                <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider">স্ট্যাটাস</th>
                                <th class="px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider">ক্রিয়া</th>
                            </tr>
                        </thead>
                        <tbody id="treatment-table-body" class="bg-white divide-y divide-gray-200">
                            <!-- Data will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Waiting List Tab -->
            <div id="waiting-tab" class="tab-content hidden">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">অপেক্ষমান তালিকা পরিচালনা</h2>
                    <button id="add-waiting-btn" class="btn-primary flex items-center">
                        <i class="fas fa-plus mr-2"></i> নতুন রোগী যোগ করুন
                    </button>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8" id="waiting-form-container" style="display: none;">
                    <div class="md:col-span-3 bg-teal-50 p-6 rounded-lg mb-4">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">নতুন অপেক্ষমান রোগীর তথ্য যোগ করুন</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">রোগীর নাম</label>
                                <input type="text" id="waiting-name-input" class="input-field w-full" placeholder="মো. করিম">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">প্রক্রিয়া</label>
                                <input type="text" id="waiting-procedure-input" class="input-field w-full" placeholder="দাঁতের চিকিত্সা">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">অপেক্ষার সময়</label>
                                <input type="text" id="waiting-time-input" class="input-field w-full" placeholder="১৫ মিনিট">
                            </div>
                        </div>
                        <div class="flex justify-end space-x-4 mt-6">
                            <button id="cancel-waiting-btn" class="btn-secondary">বাতিল করুন</button>
                            <button id="save-waiting-btn" class="btn-primary">সংরক্ষণ করুন</button>
                        </div>
                    </div>
                </div>
                
                <div class="space-y-4" id="waiting-table">
                    <!-- Data will be populated by JavaScript -->
                </div>
            </div>
            
            <!-- Marquee Notice Tab -->
            <div id="marquee-tab" class="tab-content hidden">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">নোটিস বোর্ড বার্তা</h2>
                
                <div class="bg-blue-50 p-6 rounded-lg mb-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">নোটিস বোর্ড বার্তা সম্পাদনা করুন</h3>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">বার্তা (বাংলা বা ইংরেজি)</label>
                        <textarea id="marquee-text" rows="4" class="input-field w-full" placeholder="আপনার বার্তা এখানে লিখুন..."></textarea>
                    </div>
                    <div class="flex justify-end">
                        <button id="save-marquee-btn" class="btn-primary">বার্তা সংরক্ষণ করুন</button>
                    </div>
                </div>
                
                <div class="bg-white border border-gray-200 rounded-lg p-4">
                    <h3 class="text-lg font-semibold text-gray-800 mb-2">প্রিভিউ</h3>
                    <div class="marquee-container border border-gray-300 rounded p-3">
                        <div id="marquee-preview" class="marquee-content text-lg text-gray-700">
                            <!-- Preview will be updated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Image Slider Tab -->
            <div id="slider-tab" class="tab-content hidden">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">ইমেজ স্লাইডার পরিচালনা</h2>
                
                <div class="bg-blue-50 p-6 rounded-lg mb-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">স্লাইডার ইমেজ যোগ করুন</h3>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">ইমেজ URL</label>
                        <input type="text" id="image-url-input" class="input-field w-full" placeholder="https://example.com/image.jpg">
                        <p class="text-sm text-gray-600 mt-2">দ্রষ্টব্য: এই ডেমো ভার্সনে শুধুমাত্র URL ইনপুট সাপোর্ট করা হয়। সম্পূর্ণ অফলাইন সংস্করণে ফাইল আপলোড যুক্ত করা হবে।</p>
                    </div>
                    <div class="flex justify-end">
                        <button id="add-image-btn" class="btn-primary">ইমেজ যোগ করুন</button>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="slider-images-container">
                    <!-- Images will be populated by JavaScript -->
                </div>
            </div>
        </div>
        
        <!-- Call Next Patient Section -->
        <div class="medical-card p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">পরবর্তী রোগী ডাকুন</h2>
            <div class="bg-gradient-to-r from-blue-50 to-teal-50 p-8 rounded-lg text-center">
                <div class="w-20 h-20 rounded-full bg-white flex items-center justify-center mx-auto mb-6 shadow-lg">
                    <i class="fas fa-user-md text-4xl text-teal-500"></i>
                </div>
                <h3 class="text-2xl font-bold text-gray-800 mb-4">অপেক্ষমান তালিকা থেকে পরবর্তী রোগী ডাকুন</h3>
                <p class="text-gray-700 mb-6 max-w-2xl mx-auto">এই বাটন চাপলে, অপেক্ষমান তালিকার প্রথম রোগীর নাম TV স্ক্রিনে প্রদর্শিত হবে এবং বাংলায় ভয়েস ঘোষণা করা হবে।</p>
                <button id="call-next-btn" class="btn-primary text-lg py-4 px-12">
                    <i class="fas fa-bullhorn mr-3"></i> পরবর্তী রোগী ডাকুন
                </button>
            </div>
        </div>
        
        <!-- System Status -->
        <div class="medical-card p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">সিস্টেম স্ট্যাটাস</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="bg-blue-50 p-6 rounded-lg text-center">
                    <div class="w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-procedures text-2xl text-blue-600"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800" id="status-active-count">0</h3>
                    <p class="text-gray-600">সক্রিয় চিকিত্সা</p>
                </div>
                <div class="bg-teal-50 p-6 rounded-lg text-center">
                    <div class="w-16 h-16 rounded-full bg-teal-100 flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-clock text-2xl text-teal-600"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800" id="status-waiting-count">0</h3>
                    <p class="text-gray-600">অপেক্ষমান রোগী</p>
                </div>
                <div class="bg-green-50 p-6 rounded-lg text-center">
                    <div class="w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-images text-2xl text-green-600"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800" id="status-image-count">0</h3>
                    <p class="text-gray-600">স্লাইডার ইমেজ</p>
                </div>
                <div class="bg-purple-50 p-6 rounded-lg text-center">
                    <div class="w-16 h-16 rounded-full bg-purple-100 flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-sync-alt text-2xl text-purple-600"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800">সক্রিয়</h3>
                    <p class="text-gray-600">রিয়েল-টাইম সিঙ্ক</p>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Initialize admin panel
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize clock
            function updateAdminClock() {
                const now = new Date();
                const timeString = now.toLocaleTimeString('en-US', { hour12: false, hour: '2-digit', minute: '2-digit' });
                document.getElementById('admin-clock').textContent = timeString;
            }
            
            setInterval(updateAdminClock, 1000);
            updateAdminClock();
            
            // Initialize Broadcast Channel for real-time sync
            window.broadcastChannel = new BroadcastChannel('smile-xpert-channel');
            
            // Load initial data
            loadAdminData();
            
            // Tab switching functionality
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // Update active tab button
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show selected tab content
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.add('hidden');
                    });
                    document.getElementById(tabId).classList.remove('hidden');
                });
            });
            
            // Treatment form functionality
            document.getElementById('add-treatment-btn').addEventListener('click', function() {
                document.getElementById('treatment-form-container').style.display = 'block';
                document.getElementById('add-treatment-btn').style.display = 'none';
            });
            
            document.getElementById('cancel-treatment-btn').addEventListener('click', function() {
                document.getElementById('treatment-form-container').style.display = 'none';
                document.getElementById('add-treatment-btn').style.display = 'flex';
                
                // Clear form
                document.getElementById('surgeon-input').value = '';
                document.getElementById('unit-input').value = '';
                document.getElementById('patient-input').value = '';
                document.getElementById('status-input').value = 'In-Progress';
            });
            
            document.getElementById('save-treatment-btn').addEventListener('click', saveTreatment);
            
            // Waiting list form functionality
            document.getElementById('add-waiting-btn').addEventListener('click', function() {
                document.getElementById('waiting-form-container').style.display = 'block';
                document.getElementById('add-waiting-btn').style.display = 'none';
            });
            
            document.getElementById('cancel-waiting-btn').addEventListener('click', function() {
                document.getElementById('waiting-form-container').style.display = 'none';
                document.getElementById('add-waiting-btn').style.display = 'flex';
                
                // Clear form
                document.getElementById('waiting-name-input').value = '';
                document.getElementById('waiting-procedure-input').value = '';
                document.getElementById('waiting-time-input').value = '';
            });
            
            document.getElementById('save-waiting-btn').addEventListener('click', saveWaitingPatient);
            
            // Marquee functionality
            document.getElementById('save-marquee-btn').addEventListener('click', saveMarquee);
            
            // Update marquee preview
            document.getElementById('marquee-text').addEventListener('input', function() {
                document.getElementById('marquee-preview').textContent = this.value || 'বার্তা প্রিভিউ এখানে দেখানো হবে...';
            });
            
            // Image slider functionality
            document.getElementById('add-image-btn').addEventListener('click', addSliderImage);
            
            // Call next patient
            document.getElementById('call-next-btn').addEventListener('click', callNextPatientFromAdmin);
        });
        
        function loadAdminData() {
            // Load active treatments
            const treatments = JSON.parse(localStorage.getItem('activeTreatments') || '[]');
            const tbody = document.getElementById('treatment-table-body');
            
            if (treatments.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="5" class="px-6 py-12 text-center text-gray-500">
                            <i class="fas fa-user-md text-4xl text-gray-300 mb-4"></i>
                            <p class="text-lg">কোনও সক্রিয় চিকিত্সা পাওয়া যায়নি</p>
                            <p class="text-sm mt-2">নতুন চিকিত্সা যোগ করুন</p>
                        </td>
                    </tr>
                `;
                document.getElementById('status-active-count').textContent = '0';
            } else {
                let html = '';
                treatments.forEach((treatment, index) => {
                    const statusText = treatment.status === 'In-Progress' ? 'চলমান' : 'পরবর্তী';
                    
                    html += `
                        <tr class="${index % 2 === 0 ? 'bg-gray-50' : 'bg-white'}">
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 bengali-text">${treatment.surgeon}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">${treatment.unit}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900 bengali-text">${treatment.patient}</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="${treatment.status === 'In-Progress' ? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'} px-3 py-1 rounded-full text-sm font-semibold">${statusText}</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                <button onclick="deleteTreatment(${index})" class="text-red-600 hover:text-red-900 mr-4">
                                    <i class="fas fa-trash"></i> মুছুন
                                </button>
                            </td>
                        </tr>
                    `;
                });
                
                tbody.innerHTML = html;
                document.getElementById('status-active-count').textContent = treatments.length;
            }
            
            // Load waiting list
            const waitingList = JSON.parse(localStorage.getItem('waitingList') || '[]');
            const waitingContainer = document.getElementById('waiting-table');
            
            if (waitingList.length === 0) {
                waitingContainer.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <i class="fas fa-users text-4xl text-gray-300 mb-4"></i>
                        <p class="text-lg">অপেক্ষমান তালিকা খালি</p>
                        <p class="text-sm mt-2">নতুন রোগী যোগ করুন</p>
                    </div>
                `;
                document.getElementById('status-waiting-count').textContent = '0';
            } else {
                let html = '';
                waitingList.forEach((patient, index) => {
                    html += `
                        <div class="flex items-center justify-between p-4 rounded-lg border border-gray-200 bg-white">
                            <div class="flex items-center">
                                <div class="w-10 h-10 rounded-full bg-gradient-to-r from-blue-100 to-teal-100 flex items-center justify-center mr-4">
                                    <span class="font-bold text-blue-700">${index + 1}</span>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-800 bengali-text">${patient.name}</h4>
                                    <p class="text-sm text-gray-600">প্রক্রিয়া: ${patient.procedure || 'সাধান্ত চেকআপ'}</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-sm text-gray-500">অপেক্ষার সময়</div>
                                <div class="font-semibold text-gray-700 mb-2">${patient.waitTime || '১৫ মিনিট'}</div>
                                <button onclick="deleteWaitingPatient(${index})" class="text-sm text-red-600 hover:text-red-900">
                                    <i class="fas fa-trash mr-1"></i> মুছুন
                                </button>
                            </div>
                        </div>
                    `;
                });
                
                waitingContainer.innerHTML = html;
                document.getElementById('status-waiting-count').textContent = waitingList.length;
            }
            
            // Load marquee content
            const marqueeContent = localStorage.getItem('marqueeContent') || 'স্বাগতম Smile Xpert ডেন্টাল ক্লিনিকে। আমাদের বিশেষজ্ঞ দল আপনাকে সর্বোচ্চ মানের ডেন্টাল যত্ন প্রদান করবে। আজকের বিশেষ অফার: দাঁতের সাদা করার জন্য ২০% ছাড়। আরও তথ্যের জন্য আমাদের সাথে যোগাযোগ করুন।';
            document.getElementById('marquee-text').value = marqueeContent;
            document.getElementById('marquee-preview').textContent = marqueeContent;
            
            // Load slider images
            loadAdminSliderImages();
        }
        
        function saveTreatment() {
            const surgeon = document.getElementById('surgeon-input').value.trim();
            const unit = document.getElementById('unit-input').value.trim();
            const patient = document.getElementById('patient-input').value.trim();
            const status = document.getElementById('status-input').value;
            
            if (!surgeon || !unit || !patient) {
                alert('দয়া করে সমস্ত ফিল্ড পূর্ণ করুন।');
                return;
            }
            
            const treatments = JSON.parse(localStorage.getItem('activeTreatments') || '[]');
            treatments.push({
                surgeon,
                unit,
                patient,
                status
            });
            
            localStorage.setItem('activeTreatments', JSON.stringify(treatments));
            
            // Hide form and show button
            document.getElementById('treatment-form-container').style.display = 'none';
            document.getElementById('add-treatment-btn').style.display = 'flex';
            
            // Clear form
            document.getElementById('surgeon-input').value = '';
            document.getElementById('unit-input').value = '';
            document.getElementById('patient-input').value = '';
            document.getElementById('status-input').value = 'In-Progress';
            
            // Reload data
            loadAdminData();
            
            // Broadcast update to TV view
            broadcastChannel.postMessage({ type: 'data-updated' });
        }
        
        function deleteTreatment(index) {
            if (confirm('আপনি কি এই চিকিত্সা মুছে ফেলতে চান?')) {
                const treatments = JSON.parse(localStorage.getItem('activeTreatments') || '[]');
                treatments.splice(index, 1);
                localStorage.setItem('activeTreatments', JSON.stringify(treatments));
                
                loadAdminData();
                broadcastChannel.postMessage({ type: 'data-updated' });
            }
        }
        
        function saveWaitingPatient() {
            const name = document.getElementById('waiting-name-input').value.trim();
            const procedure = document.getElementById('waiting-procedure-input').value.trim();
            const waitTime = document.getElementById('waiting-time-input').value.trim();
            
            if (!name) {
                alert('দয়া করে রোগীর নাম লিখুন।');
                return;
            }
            
            const waitingList = JSON.parse(localStorage.getItem('waitingList') || '[]');
            waitingList.push({
                name,
                procedure: procedure || 'সাধান্ত চেকআপ',
                waitTime: waitTime || '১৫ মিনিট'
            });
            
            localStorage.setItem('waitingList', JSON.stringify(waitingList));
            
            // Hide form and show button
            document.getElementById('waiting-form-container').style.display = 'none';
            document.getElementById('add-waiting-btn').style.display = 'flex';
            
            // Clear form
            document.getElementById('waiting-name-input').value = '';
            document.getElementById('waiting-procedure-input').value = '';
            document.getElementById('waiting-time-input').value = '';
            
            // Reload data
            loadAdminData();
            
            // Broadcast update to TV view
            broadcastChannel.postMessage({ type: 'data-updated' });
        }
        
        function deleteWaitingPatient(index) {
            if (confirm('আপনি কি এই রোগীকে অপেক্ষমান তালিকা থেকে মুছে ফেলতে চান?')) {
                const waitingList = JSON.parse(localStorage.getItem('waitingList') || '[]');
                waitingList.splice(index, 1);
                localStorage.setItem('waitingList', JSON.stringify(waitingList));
                
                loadAdminData();
                broadcastChannel.postMessage({ type: 'data-updated' });
            }
        }
        
        function saveMarquee() {
            const marqueeText = document.getElementById('marquee-text').value.trim();
            
            if (!marqueeText) {
                alert('দয়া করে নোটিস বোর্ডের বার্তা লিখুন।');
                return;
            }
            
            localStorage.setItem('marqueeContent', marqueeText);
            alert('বার্তা সংরক্ষিত হয়েছে!');
            
            // Broadcast update to TV view
            broadcastChannel.postMessage({ type: 'data-updated' });
        }
        
        function loadAdminSliderImages() {
            const images = JSON.parse(localStorage.getItem('sliderImages') || '[]');
            const container = document.getElementById('slider-images-container');
            
            document.getElementById('status-image-count').textContent = images.length;
            
            if (images.length === 0) {
                container.innerHTML = `
                    <div class="md:col-span-3 text-center py-8 text-gray-500">
                        <i class="fas fa-images text-4xl text-gray-300 mb-4"></i>
                        <p class="text-lg">কোনও স্লাইডার ইমেজ পাওয়া যায়নি</p>
                        <p class="text-sm mt-2">উপরে ইমেজ URL যোগ করুন</p>
                    </div>
                `;
            } else {
                let html = '';
                images.forEach((image, index) => {
                    html += `
                        <div class="bg-white rounded-lg border border-gray-200 overflow-hidden">
                            <div class="h-48 overflow-hidden">
                                <img src="${image}" alt="Slider Image ${index + 1}" class="w-full h-full object-cover">
                            </div>
                            <div class="p-4">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">ইমেজ #${index + 1}</span>
                                    <button onclick="deleteSliderImage(${index})" class="text-red-600 hover:text-red-900 text-sm">
                                        <i class="fas fa-trash mr-1"></i> মুছুন
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                container.innerHTML = html;
            }
        }
        
        function addSliderImage() {
            const imageUrl = document.getElementById('image-url-input').value.trim();
            
            if (!imageUrl) {
                alert('দয়া করে ইমেজ URL লিখুন।');
                return;
            }
            
            // Basic URL validation
            if (!imageUrl.startsWith('http')) {
                alert('দয়া করে একটি বৈধ URL লিখুন (http বা https দিয়ে শুরু হতে হবে)।');
                return;
            }
            
            const images = JSON.parse(localStorage.getItem('sliderImages') || '[]');
            images.push(imageUrl);
            
            localStorage.setItem('sliderImages', JSON.stringify(images));
            
            // Clear input
            document.getElementById('image-url-input').value = '';
            
            // Reload images
            loadAdminSliderImages();
            
            // Broadcast update to TV view
            broadcastChannel.postMessage({ type: 'data-updated' });
        }
        
        function deleteSliderImage(index) {
            if (confirm('আপনি কি এই ইমেজ মুছে ফেলতে চান?')) {
                const images = JSON.parse(localStorage.getItem('sliderImages') || '[]');
                images.splice(index, 1);
                localStorage.setItem('sliderImages', JSON.stringify(images));
                
                loadAdminSliderImages();
                broadcastChannel.postMessage({ type: 'data-updated' });
            }
        }
        
        function callNextPatientFromAdmin() {
            const waitingList = JSON.parse(localStorage.getItem('waitingList') || '[]');
            
            if (waitingList.length === 0) {
                alert('অপেক্ষমান তালিকা খালি। প্রথমে অপেক্ষমান তালিকায় রোগী যোগ করুন।');
                return;
            }
            
            if (confirm('আপনি কি পরবর্তী রোগী ডাকতে চান? এই রোগীর নাম TV স্ক্রিনে প্রদর্শিত হবে এবং বাংলায় ঘোষণা করা হবে।')) {
                // Broadcast call to TV view
                broadcastChannel.postMessage({ type: 'call-next-patient' });
                alert('রোগী ডাকা হয়েছে। TV স্ক্রিন চেক করুন।');
            }
        }
    </script>
    <!-- At the end of <body> section -->
<script src="shared.js"></script>
<script src="admin-panel.js"></script>
</body>
</html>
